# 基本ルール

このプロジェクトでは日本語を基本言語とします。
アウトプットも必ず日本語を使用してください。

# Taco プロジェクト

このプロジェクトは、Slackの特定チャンネルの会話内容を分析し、デイリーレポートとタスクリストを自動生成することを目的としています。

## 目的

日々のコミュニケーションからタスクや進捗状況を自動的に集約し、チームの状況把握を効率化します。

## ディレクトリ構造

- `reports/`: 生成されたデイリーレポート（Markdown形式）が保存されます。
- `reports/raw/`: Slackから取得した生のメッセージデータ（JSON形式）が保存されます。
- `tasks.md`: 最新のタスクリストが保存されます。

## デイリーレポート生成手順

以下のコマンドを実行することで、Slackから過去1週間分のメッセージが取得され、`reports/raw/` ディレクトリに日付ごとのJSONファイルとして保存されます。

1. **仮想環境のアクティベート**
   ```bash
   # このプロジェクトでは、スクリプトが仮想環境のPythonを直接呼び出すため、手動でのアクティベートは不要です。
   ```

2. **生データ取得スクリプトの実行**
   ```bash
   ./run_daily_report.sh
   ```

## レポート処理フロー

`./run_daily_report.sh` の実行後、Gemini CLI (私) が `reports/raw/` ディレクトリ内の各JSONファイルを読み込み、以下の処理を自動的に行います。

1. 各JSONファイルの内容を分析し、デイリーレポート（Markdown形式）を生成します。
2. 生成されたデイリーレポートは `reports/YYYY-MM-DD.md` として保存されます。
3. 最新のデイリーレポートからタスクリストを抽出し、プロジェクトルートの `tasks.md` を最新の状態に更新します。

### 必要な環境変数

スクリプトの実行には、プロジェクトのルートディレクトリに `.env` ファイルを配置し、以下の変数を設定する必要があります。

- `SLACK_API_TOKEN`: Slack BotのOAuthトークン (`xoxb-...`)
- `SLACK_CHANNEL_ID`: 監視対象のSlackチャンネルID (`C...`)

### 注意事項

- レポートの分析と生成はGemini CLI (私) が行います。`main.py` はメッセージの取得と保存に特化しています。
- `tasks.md` と `reports/` ディレクトリは `.gitignore` に追加されており、Gitの追跡対象外です。

# Cursor rules（運用ルールまとめ）

## 1. 言語・出力
- プロジェクトの基本言語は**日本語**とする。
- アウトプット（レポート・タスクリスト・コメント等）も**必ず日本語**で記述する。

## 2. ディレクトリ・ファイル運用
- `reports/`：生成されたデイリーレポート（Markdown形式）を保存するディレクトリ。
- `reports/raw/`：Slackから取得した生のメッセージデータ（JSON形式）を保存するディレクトリ。
- `tasks.md`：最新のタスクリストを保存するファイル。プロジェクトルートに配置。
- `tasks.md`と`reports/`ディレクトリは`.gitignore`に追加し、**Git管理対象外**とする。

## 3. デイリーレポート生成・タスク抽出フロー
- `./run_daily_report.sh`を実行すると、Slackから過去1週間分のメッセージを取得し、`reports/raw/`に日付ごとのJSONファイルとして保存する。
- その後、Gemini CLIが`reports/raw/`内の各JSONファイルを分析し、デイリーレポート（Markdown）を`reports/YYYY-MM-DD.md`として生成。
- 最新のデイリーレポートからタスクリストを抽出し、`tasks.md`を**最新状態に更新**する。

## 4. 環境変数・設定
- プロジェクトルートに`.env`ファイルを配置し、以下の変数を必ず設定すること。
  - `SLACK_API_TOKEN`：Slack BotのOAuthトークン（例：`xoxb-...`）
  - `SLACK_CHANNEL_ID`：監視対象のSlackチャンネルID（例：`C...`）

## 5. コード・スクリプトの役割
- `main.py`：Slackメッセージの取得と保存のみを担当。レポート分析・生成は行わない。
- レポートの分析・生成は**Gemini CLI**が担当する。

## 6. タスク抽出・Markdown出力ルール
- タスクは「【タスク】」や「MTG」などのキーワードで抽出。
- タスクには`status`（未着手/進行中/完了）と`genre`（開発/会議/資料作成など）を付与。
- Markdown出力時、ジャンルごとにセクション分けし、状態ごとにアイコン（📝/🚀/✅）とチェックボックス（- [ ]/- [x]）を付与。
- タスクが0件の場合は「本日のタスクはありませんでした」と出力。